<!DOCTYPE html>
<!-- saved from url=(0050)http://javascript.ruanyifeng.com/nodejs/basic.html -->
<html class="no-js" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width">

  <title>Node.js 概述 -- JavaScript 标准参考教程（alpha）</title>
  
  <!-- Included CSS Files (Uncompressed) -->
  <!--
  <link rel="stylesheet" href="stylesheets/foundation.css">
  -->
  
  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="http://javascript.ruanyifeng.com/css/foundation.css">
  <link rel="stylesheet" href="http://javascript.ruanyifeng.com/css/main.css">

  <!-- IE Fix for HTML5 Tags -->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <script async="" src="./basic_files/analytics.js"></script><script src="./basic_files/jquery.js"></script>
  <script src="./basic_files/toc.js"></script>
  <script src="./basic_files/main.js"></script>

<script type="text/javascript" async="" src="./basic_files/embed.js"></script></head>
<body>

<header class="top-bar" id="header">

<div class="fixed">

<nav class="top-bar">
<ul>
<!-- Title Area -->
	<li class="name has-dropdown">
	<h1><a href="http://javascript.ruanyifeng.com/">JavaScript 标准参考教程（alpha） </a></h1>
		<ul class="dropdown">
			
			<li><a href="http://javascript.ruanyifeng.com/#introduction">导论</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#grammar">基本语法</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#stdlib">标准库</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#oop">面向对象编程</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#dom">DOM</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#bom">浏览器对象</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#htmlapi">HTML网页的API</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#jquery">jQuery</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#tool">开发工具</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#advanced">高级语法</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#appendix">附录</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#library">草稿一：函数库</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#nodejs">草稿二：Node.js</a></li>
			
		</ul>
	</li>
</ul>

<section>


<ul class="left">
<li class="divider"></li>
<li class="has-dropdown"><a class="active" href="http://javascript.ruanyifeng.com/nodejs/basic.html#"> 草稿二：Node.js </a><ul class="dropdown">























<li class="active"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#">Node.js 概述</a></li>











<li><a href="http://javascript.ruanyifeng.com/nodejs/child-process.html">Child Process模块</a></li>





<li><a href="http://javascript.ruanyifeng.com/nodejs/commonjs.html">CommonJS规范</a></li>





































<li><a href="http://javascript.ruanyifeng.com/nodejs/events.html">events模块</a></li>







<li><a href="http://javascript.ruanyifeng.com/nodejs/express.html">Express框架</a></li>













































<li><a href="http://javascript.ruanyifeng.com/nodejs/mongodb.html">MongoDB的应用</a></li>











<li><a href="http://javascript.ruanyifeng.com/nodejs/npm.html">npm模块管理器</a></li>















<li><a href="http://javascript.ruanyifeng.com/nodejs/packagejson.html">package.json文件</a></li>

















<li><a href="http://javascript.ruanyifeng.com/nodejs/process.html">process对象</a></li>















<li><a href="http://javascript.ruanyifeng.com/nodejs/stream.html">stream接口</a></li>







































</ul></li>
<li class="divider"></li>
<li class="has-dropdown nav-3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#"> Node.js 概述</a><ul class="dropdown">
<li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc0">简介</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc7">模块化结构</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc11">fs模块</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc18">http模块</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc23">Buffer对象</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc24">cluster模块</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc25">参考链接</a></li></ul></li>
</ul>


<ul class="right">
	<li class="divider"></li>
	<li>
		<a href="https://github.com/ruanyf/jstutorial" target="_blank">GitHub <i class="foundicon-edit"></i></a>
	</li>
	<li class="divider"></li>
	<li>
		<a href="http://javascript.ruanyifeng.com/nodejs/basic.html#">TOP <i class="foundicon-up-arrow"></i></a>
	</li>
</ul>

</section>

</nav>  
</div>
</header>


<article class="bookPage">

  <div class="row">
    <div class="twelve columns">

<h1> Node.js 概述 </h1>

<aside class="right"><p>来自<a href="http://javascript.ruanyifeng.com/">《JavaScript 标准参考教程（alpha）》</a>，by 阮一峰</p></aside>

<h2>目录</h2><div id="toc" class="panel callout radius"><ul><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc0">简介</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc1">安装与更新</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc2">版本管理工具nvm</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc3">基本用法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc4">REPL环境</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc5">异步操作</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc6">全局对象和全局变量</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc7">模块化结构</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc8">概述</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc9">核心模块</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc10">自定义模块</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc11">fs模块</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc12">mkdir()，writeFile()，readfile()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc13">mkdirSync()，writeFileSync()，readFileSync()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc14">readdir()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc15">exists(path, callback)</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc16">stat()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc17">watchfile()，unwatchfile()</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc18">http模块</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc19">实例：搭建一个HTTP服务器</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc20">处理POST请求</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc21">发出请求：request方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc22">搭建HTTPs服务器</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc23">Buffer对象</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc24">cluster模块</a></li><li class="toc-h2 toc-active"><a href="http://javascript.ruanyifeng.com/nodejs/basic.html#toc25">参考链接</a></li></ul></div>


<span id="toc0"></span><div class="chapter"><h2 id="简介">简介</h2></div>

<p>Node.js是JavaScript在服务器端的一个运行环境，也是一个工具库，用来与服务器端其他软件互动。它的JavaScript解释器，采用了Google公司的V8引擎。</p>

<span id="toc1"></span><h3 id="安装与更新">安装与更新</h3>

<p>访问官方网站<a href="http://nodejs.org/">nodejs.org</a>了解安装细节。</p>

<p>安装完成以后，运行下面的命令，查看是否能正常运行。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">node --version
// 或者
node -v</code></pre></div>

<p>更新node.js版本，可以通过node.js的n模块完成。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo npm install n -g
sudo n stable</code></pre></div>

<p>上面代码通过n模块，将node.js更新为最新发布的稳定版。</p>

<p>n模块也可以指定安装的版本。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo n 0.8.21</code></pre></div>

<span id="toc2"></span><h3 id="版本管理工具nvm">版本管理工具nvm</h3>

<p>如果想在同一台机器，同时运行多个版本的node.js，就需要用到版本管理工具nvm。</p>

<p>首先，需要安装nvm。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git clone https://github.com/creationix/nvm.git ~/.nvm</code></pre></div>

<p>然后使用下面的命令，激活nvm。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">source</span> ~/.nvm/nvm.sh</code></pre></div>

<p>上面这条命令，每次使用nvm前都要输入，建议将其加入~/.bashrc文件（假定你所使用的shell是bash）。</p>

<p>激活nvm之后，就可以安装指定版本的node.js。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm install 0.10</code></pre></div>

<p>上面这条命令，安装最新的v0.10.x版本的node.js。</p>

<p>安装后，就可以指定使用该版本。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm use 0.10</code></pre></div>

<p>或者，直接进入该版本的REPL环境。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm run 0.10</code></pre></div>

<p>如果在项目根目录下新建一个.nvmrc文件，将版本号写入其中，则nvm use命令就不再需要附加版本号。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm use</code></pre></div>

<p>ls命令用于查看本地所安装的版本。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm ls</code></pre></div>

<p>ls-remote命令用于查看服务器上所有可供安装的版本。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm ls-remote</code></pre></div>

<p>如果要退出已经激活的nvm，使用deactivate命令。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">nvm deactivate</code></pre></div>

<span id="toc3"></span><h3 id="基本用法">基本用法</h3>

<p>安装完成后，运行node.js程序，就是使用node命令读取JavaScript脚本。</p>

<p>假定当前目录有一个demo.js的脚本文件，运行时这样写。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">node demo

// 或者

node demo.js</code></pre></div>

<span id="toc4"></span><h3 id="repl环境">REPL环境</h3>

<p>在命令行键入node命令，后面没有文件名，就进入一个Node.js的REPL环境（Read–eval–print loop，"读取-求值-输出"循环），可以直接运行各种JavaScript命令。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">node
&gt; 1+1
2</code></pre></div>

<p>如果使用参数 --use_strict，则REPL将在严格模式下运行。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">node --use_strict</code></pre></div>

<p>这个REPL是Node.js与用户互动的shell，各种基本的shell功能都可以在里面使用，比如使用上下方向键遍历曾经使用过的命令。特殊变量下划线（_）表示上一个命令的返回结果。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">&gt; 1+1
2
&gt; _+1
3</code></pre></div>

<p>在REPL中，如果运行一个表达式，会直接在命令行返回结果，如果运行一条语句则不会，因为它没有返回值。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">&gt; <span class="nv">x</span> <span class="o">=</span> 1
1
&gt; var <span class="nv">x</span> <span class="o">=</span> 1</code></pre></div>

<p>上面代码的第二条命令，没有显示任何结果。因为这是一条语句，不是表达式，所以没有返回值。</p>

<span id="toc5"></span><h3 id="异步操作">异步操作</h3>

<p>Node采用V8引擎处理JavaScript脚本，最大特点就是单线程运行，一次只能运行一个任务。这导致Node大量采用异步操作（asynchronous opertion），即任务不是马上执行，而是插在任务队列的尾部，等到前面的任务运行完后再执行。</p>

<p>由于这种特性，某一个任务的后续操作，往往采用回调函数（callback）的形式进行定义。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">isTrue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">"Value was true."</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Value is not true!"</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>上面代码就把进一步的处理，交给回调函数callback。约定俗成，callback的位置总是最后一个参数。值得注意的是，callback的格式也有约定。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span> 
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>callback的第一个参数是一个Error对象，第二个参数才是真正的数据。如果没有发生错误，第一个参数就传入null。这种写法有一个很大的好处，就是说只要判断回调函数的第一个参数，就知道有没有出错，如果不是null，就肯定出错了。</p>

<span id="toc6"></span><h3 id="全局对象和全局变量">全局对象和全局变量</h3>

<p>Node提供以下一些全局对象，它们是所有模块都可以调用的。</p>

<ul>
<li><strong>global</strong>：表示Node所在的全局环境，类似于浏览器中的window对象。</li>
<li><strong>process</strong>：指向Node内置的process模块，允许开发者与当前进程互动。</li>
<li><strong>console</strong>：指向Node内置的console模块，提供命令行环境中的标准输入、标准输出功能。</li>
</ul>

<p>全局函数：</p>

<ul>
<li><strong>定时器函数</strong>：共有4个，分别是setTimeout(), clearTimeout(), setInterval(), clearInterval()。</li>
<li><strong>require</strong>：用于加载模块。</li>
</ul>

<p>全局变量：</p>

<ul>
<li><strong>_filename</strong>：指向当前运行的脚本文件名。</li>
<li><strong>_dirname</strong>：指向当前运行的脚本所在的目录。</li>
</ul>

<p>除此之外，还有一些对象实际上是模块内部的局部变量，指向的对象根据模块不同而不同，但是所有模块都适用，可以看作是伪全局变量，主要为module, module.exports, exports等。</p>

<p>module变量指代当前模块。module.exports变量表示当前模块对外输出的接口，其他文件加载该模块，实际上就是读取module.exports变量。</p>

<ul>
<li>module.id 模块的识别符，通常是模块的文件名。</li>
<li>module.filename 模块的文件名。</li>
<li>module.loaded 返回一个布尔值，表示模块是否已经完成加载。</li>
<li>module.parent 返回使用该模块的模块。</li>
<li>module.children 返回一个数组，表示该模块要用到的其他模块。</li>
</ul>

<p>这里需要特别指出的是，exports变量实际上是一个指向module.exports对象的链接，等同在每个模块头部，有一行这样的命令。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span></code></pre></div>

<p>这造成的结果是，在对外输出模块接口时，可以向exports对象添加方法，但是不能直接将exports变量指向一个函数。 </p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);};</span></code></pre></div>

<p>上面这样的写法是无效的，因为它切断了exports与module.exports之间的链接。但是，下面这样写是可以的。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">exports</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">*</span> <span class="nx">r</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">circumference</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">r</span><span class="p">;</span>
<span class="p">};</span></code></pre></div>

<p>如果你觉得，exports与module.exports之间的区别很难分清，一个简单的处理方法，就是放弃使用exports，只使用module.exports。</p>

<span id="toc7"></span><div class="chapter"><h2 id="模块化结构">模块化结构</h2></div>

<span id="toc8"></span><h3 id="概述">概述</h3>

<p>Node.js采用模块化结构，按照<a href="http://wiki.commonjs.org/wiki/CommonJS">CommonJS规范</a>定义和使用模块。模块与文件是一一对应关系，即加载一个模块，实际上就是加载对应的一个模块文件。</p>

<p>require方法用于指定加载模块。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./circle.js'</span><span class="p">);</span></code></pre></div>

<p>上面代码表明，从当前目录下的circle.js文件，加载circle模块。因为require方法默认加载的就是js文件，因此可以把js后缀名省略。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./circle'</span><span class="p">);</span></code></pre></div>

<p>require方法的参数是模块文件的名字。它分成两种情况，第一种情况是参数中含有文件路径（比如上例），这时路径是相对于当前脚本所在的目录，第二种情况是参数中不含有文件路径（比如下例）。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">);</span></code></pre></div>

<p>如果require方法的参数不带有路径，则node.js依次按照以下顺序，去寻找模块文件。</p>

<p>node.js依次到下面的目录，去寻找bar模块。</p>

<ul>
<li>./node_modules/bar</li>
<li>../node_modules/bar</li>
<li>../../node_modules/bar</li>
<li>/node_modules/bar</li>
</ul>

<p>可以看到，如果没有指明模块所在位置，Node会依次从当前目录向上，一级级在node_modules子目录下寻找模块。如果没有找到该模块，会抛出一个错误。这样做的好处是，不同的项目可以在自己的目录中，安装同一个模块的不同版本，而不会发生版本冲突。</p>

<p>有时候，一个模块本身就是一个目录，目录中包含多个文件。这时候，Node在package.json文件中，寻找main属性所指明的模块入口文件。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span> 
    <span class="s2">"name"</span> <span class="o">:</span> <span class="s2">"bar"</span><span class="p">,</span>
    <span class="s2">"main"</span> <span class="o">:</span> <span class="s2">"./lib/bar.js"</span> 
<span class="p">}</span></code></pre></div>

<p>上面代码中，模块的启动文件为lib子目录下的bar.js。当使用require('bar')命令加载该模块时，实际上加载的是<code>bar/lib/some-library.js</code>文件。下面写法会起到同样效果。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'bar/lib/bar.js'</span><span class="p">)</span>
</code></pre></div>
<p>如果模块目录中没有package.json文件，node.js会尝试在模块目录中寻找index.js或index.node文件进行加载。</p>

<p>模块一旦被加载以后，就会被系统缓存。如果第二次还加载该模块，则会返回缓存中的版本，这意味着模块实际上只会执行一次。如果希望模块执行多次，则可以让模块返回一个函数，然后多次调用该函数。</p>

<span id="toc9"></span><h3 id="核心模块">核心模块</h3>

<p>Node.js自带一系列的核心模块，下面就是其中的一部分：</p>

<ul>
<li><strong>http</strong>：提供HTTP服务器功能。</li>
<li><strong>url</strong>：解析URL。</li>
<li><strong>fs</strong>：与文件系统交互。</li>
<li><strong>querystring</strong>：解析URL的查询字符串。</li>
<li><strong>child_process</strong>：新建子进程。</li>
<li><strong>util</strong>：提供一系列实用小工具。</li>
<li><strong>path</strong>：处理文件路径。</li>
<li><strong>crypto</strong>：提供加密和解密功能，基本上是对OpenSSL的包装。</li>
</ul>

<p>这些模块可以不用安装就使用。</p>

<p>除了使用核心模块，还可以使用第三方模块，以及自定义模块。</p>

<span id="toc10"></span><h3 id="自定义模块">自定义模块</h3>

<p>Node.js模块采用CommonJS规范。只要符合这个规范，就可以自定义模块。</p>

<p>下面是一个最简单的模块，假定新建一个foo.js文件，写入以下内容。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// foo.js</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>

<p>上面代码就是一个模块，它通过module.exports变量，对外输出一个方法。</p>

<p>这个模块的使用方法如下。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// index.js</span>

<span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./foo'</span><span class="p">);</span>

<span class="nx">m</span><span class="p">(</span><span class="s2">"这是自定义模块"</span><span class="p">);</span></code></pre></div>

<p>上面代码通过require命令加载模块文件foo.js（后缀名省略），将模块的对外接口输出到变量m，然后调用m。这时，在命令行下运行index.js，屏幕上就会输出“这是自定义模块”。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">node index
<span class="c"># 这是自定义模块</span></code></pre></div>

<p>module变量是整个模块文件的顶层变量，它的exports属性就是模块向外输出的接口。如果直接输出一个函数（就像上面的foo.js），那么调用模块就是调用一个函数。但是，模块也可以输出一个对象。下面对foo.js进行改写。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// foo.js</span>

<span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="kd">function</span> <span class="nx">p</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">out</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">out</span><span class="p">;</span></code></pre></div>

<p>上面的代码表示模块输出out对象，该对象有一个print属性，指向一个函数。下面是这个模块的使用方法。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// index.js</span>

<span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./foo'</span><span class="p">);</span>

<span class="nx">m</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="s2">"这是自定义模块"</span><span class="p">);</span></code></pre></div>

<p>上面代码表示，由于具体的方法定义在模块的print属性上，所以必须显式调用print属性。</p>

<span id="toc11"></span><div class="chapter"><h2 id="fs模块">fs模块</h2></div>

<p>fs是filesystem的缩写，该模块提供本地文件的读写能力，基本上是POSIX文件操作命令的简单包装。但是，这个模块几乎对所有操作提供异步和同步两种操作方式，供开发者选择。</p>

<span id="toc12"></span><h3 id="mkdir()，writefile()，readfile()">mkdir()，writeFile()，readfile()</h3>

<p>mkdir方法用于新建目录。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">mkdir</span><span class="p">(</span><span class="s1">'./helloDir'</span><span class="p">,</span><span class="mi">0777</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>mkdir接受三个参数，第一个是目录名，第二个是权限值，第三个是回调函数。</p>

<p>writeFile方法用于写入文件。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="s1">'./helloDir/message.txt'</span><span class="p">,</span> <span class="s1">'Hello Node'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'文件写入成功'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>readfile方法用于读取文件内容。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">'./helloDir/message.txt'</span><span class="p">,</span><span class="s1">'UTF-8'</span> <span class="p">,</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span></code></pre></div>

<p>上面代码使用readFile方法读取文件。readFile方法的第一个参数是文件名，第二个参数是文件编码，第三个参数是回调函数。可用的文件编码包括“ascii”、“utf8”和“base64”，如果这个参数没有提供，默认是utf8。</p>

<span id="toc13"></span><h3 id="mkdirsync()，writefilesync()，readfilesync()">mkdirSync()，writeFileSync()，readFileSync()</h3>

<p>这三个方法是建立目录、写入文件、读取文件的同步版本。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fs</span><span class="p">.</span><span class="nx">mkdirSync</span><span class="p">(</span><span class="s1">'./helloDirSync'</span><span class="p">,</span><span class="mi">0777</span><span class="p">);</span>
<span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="s1">'./helloDirSync/message.txt'</span><span class="p">,</span> <span class="s1">'Hello Node'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">'./helloDirSync/message.txt'</span><span class="p">,</span><span class="s1">'UTF-8'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'file created with contents:'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span></code></pre></div>

<p>对于流量较大的服务器，最好还是采用异步操作，因为同步操作时，只有前一个操作结束，才会开始后一个操作，如果某个操作特别耗时（常常发生在读写数据时），会导致整个程序停顿。</p>

<span id="toc14"></span><h3 id="readdir()">readdir()</h3>

<p>readdir方法用于读取目录，返回一个所包含的文件和子目录的数组。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">files</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">results</span><span class="p">[</span><span class="nx">filename</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">count</span><span class="o">--</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 对所有文件进行处理</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span></code></pre></div>

<span id="toc15"></span><h3 id="exists(path,-callback)">exists(path, callback)</h3>

<p>exists方法用来判断给定路径是否存在，然后不管结果如何，都会调用回调函数。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fs</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="s1">'/path/to/file'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">exists</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">util</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="nx">exists</span> <span class="o">?</span> <span class="s2">"it's there"</span> <span class="o">:</span> <span class="s2">"no file!"</span><span class="p">);</span>
<span class="p">});</span></code></pre></div>

<p>上面代码表明，回调函数的参数是一个表示文件是否存在的布尔值。</p>

<p>需要注意的是，不要在open方法之前调用exists方法，open方法本身就能检查文件是否存在。</p>

<p>下面的例子是如果给定目录存在，就删除它。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="nx">outputFolder</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Removing "</span><span class="o">+</span><span class="nx">outputFolder</span><span class="p">);</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">rmdir</span><span class="p">(</span><span class="nx">outputFolder</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<span id="toc16"></span><h3 id="stat()">stat()</h3>

<p>stat方法的参数是一个文件或目录，它产生一个对象，该对象包含了该文件或目录的具体信息。我们往往通过该方法，判断正在处理的到底是一个文件，还是一个目录。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span><span class="p">(</span><span class="s1">'/etc/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

  <span class="nx">files</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">stat</span><span class="p">(</span><span class="s1">'/etc/'</span> <span class="o">+</span> <span class="nx">file</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stats</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">isFile</span><span class="p">())</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"%s is file"</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">isDirectory</span> <span class="p">())</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"%s is a directory"</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
      <span class="p">}</span>    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'stats:  %s'</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">stats</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<span id="toc17"></span><h3 id="watchfile()，unwatchfile()">watchfile()，unwatchfile()</h3>

<p>watchfile方法监听一个文件，如果该文件发生变化，就会自动触发回调函数。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">watchFile</span><span class="p">(</span><span class="s1">'./testFile.txt'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">curr</span><span class="p">,</span> <span class="nx">prev</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the current mtime is: '</span> <span class="o">+</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">mtime</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the previous mtime was: '</span> <span class="o">+</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">mtime</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="s1">'./testFile.txt'</span><span class="p">,</span> <span class="s2">"changed"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"file write complete"</span><span class="p">);</span>   
<span class="p">});</span>
</code></pre></div>
<p>unwatchfile方法用于解除对文件的监听。</p>

<span id="toc18"></span><div class="chapter"><h2 id="http模块">http模块</h2></div>

<span id="toc19"></span><h3 id="实例：搭建一个http服务器">实例：搭建一个HTTP服务器</h3>

<p>使用Node.js搭建HTTP服务器非常简单。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span><span class="p">});</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'Hello World\n'</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="s2">"127.0.0.1"</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Server running on port 8080.'</span><span class="p">);</span></code></pre></div>

<p>上面代码第一行<code>var http = require("http")</code>，表示加载http模块。然后，调用http模块的createServer方法，创造一个服务器实例，将它赋给变量http。</p>

<p>ceateServer方法接受一个函数作为参数，该函数的request参数是一个对象，表示客户端的HTTP请求；response参数也是一个对象，表示服务器端的HTTP回应。response.writeHead方法表示，服务器端回应一个HTTP头信息；response.end方法表示，服务器端回应的具体内容，以及回应完成后关闭本次对话。最后的listen(8080)表示启动服务器实例，监听本机的8080端口。</p>

<p>将上面这几行代码保存成文件app.js，然后用node调用这个文件，服务器就开始运行了。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>node app.js</code></pre></div>

<p>这时命令行窗口将显示一行提示“Server running at port 8080.”。打开浏览器，访问<a href="http://localhost:8080%EF%BC%8C%E7%BD%91%E9%A1%B5%E6%98%BE%E7%A4%BA%E2%80%9CHello/">http://localhost:8080，网页显示“Hello</a> world!”。</p>

<p>上面的例子是当场生成网页，也可以事前写好网页，存在文件中，然后利用fs模块读取网页文件，将其返回。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">'data.txt'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">readData</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span><span class="p">});</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="s2">"127.0.0.1"</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Server running on port 8080.'</span><span class="p">);</span></code></pre></div>

<p>下面的修改则是根据不同网址的请求，显示不同的内容，已经相当于做出一个网站的雏形了。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"http"</span><span class="p">);</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// 主页</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span> <span class="o">==</span> <span class="s2">"/"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="s2">"Content-Type"</span><span class="o">:</span> <span class="s2">"text/html"</span> <span class="p">});</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">"Welcome to the homepage!"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// About页面</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span> <span class="o">==</span> <span class="s2">"/about"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="s2">"Content-Type"</span><span class="o">:</span> <span class="s2">"text/html"</span> <span class="p">});</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">"Welcome to the about page!"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// 404错误</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="p">{</span> <span class="s2">"Content-Type"</span><span class="o">:</span> <span class="s2">"text/plain"</span> <span class="p">});</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">"404 error! File not found."</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="s2">"localhost"</span><span class="p">);</span></code></pre></div>

<p>回调函数的req（request）对象，拥有以下属性。</p>

<ul>
<li>url：发出请求的网址。</li>
<li>method：HTTP请求的方法。</li>
<li>headers：HTTP请求的所有HTTP头信息。</li>
</ul>

<span id="toc20"></span><h3 id="处理post请求">处理POST请求</h3>

<p>当客户端采用POST方法发送数据时，服务器端可以对data和end两个事件，设立监听函数。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">content</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s2">"Content-Type"</span><span class="o">:</span> <span class="s2">"text/plain"</span><span class="p">});</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">"You've sent: "</span> <span class="o">+</span> <span class="nx">content</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span></code></pre></div>

<p>data事件会在数据接收过程中，每收到一段数据就触发一次，接收到的数据被传入回调函数。end事件则是在所有数据接收完成后触发。</p>

<p>对上面代码稍加修改，就可以做出文件上传的功能。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s2">"use strict"</span><span class="p">;</span> 

<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span> 
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span> 
<span class="kd">var</span> <span class="nx">destinationFile</span><span class="p">,</span> <span class="nx">fileSize</span><span class="p">,</span> <span class="nx">uploadedBytes</span><span class="p">;</span> 

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span> 
  <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span> 
  <span class="nx">destinationFile</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s2">"destination.md"</span><span class="p">);</span> 
  <span class="nx">request</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">destinationFile</span><span class="p">);</span> 
  <span class="nx">fileSize</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s1">'content-length'</span><span class="p">];</span> 
  <span class="nx">uploadedBytes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 

  <span class="nx">request</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> 
    <span class="nx">uploadedBytes</span> <span class="o">+=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> 
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">(</span><span class="nx">uploadedBytes</span> <span class="o">/</span> <span class="nx">fileSize</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span> 
    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">"Uploading "</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" %\n"</span><span class="p">);</span> 
  <span class="p">});</span> 

  <span class="nx">request</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">"File Upload Complete"</span><span class="p">);</span> 
  <span class="p">});</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3030</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"server started"</span><span class="p">);</span> 
<span class="p">});</span>
</code></pre></div>
<span id="toc21"></span><h3 id="发出请求：request方法">发出请求：request方法</h3>

<p>request方法用于发出HTTP请求。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="c1">//The url we want is: 'www.random.org/integers/?num=1&amp;min=1&amp;max=10&amp;col=1&amp;base=10&amp;format=plain&amp;rnd=new'</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">host</span><span class="o">:</span> <span class="s1">'www.random.org'</span><span class="p">,</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s1">'/integers/?num=1&amp;min=1&amp;max=10&amp;col=1&amp;base=10&amp;format=plain&amp;rnd=new'</span>
<span class="p">};</span>

<span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//another chunk of data has been recieved, so append it to `str`</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">str</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">//the whole response has been recieved, so we just print it out here</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">"hello world!"</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span></code></pre></div>

<p>request对象的第一个参数是options对象，用于指定请求的域名和路径，第二个参数是请求完成后的回调函数。</p>

<p>如果使用POST方法发出请求，只需在options对象中设定即可。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">host</span><span class="o">:</span> <span class="s1">'www.example.com'</span><span class="p">,</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s1">'/'</span><span class="p">,</span>
  <span class="nx">port</span><span class="o">:</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">'POST'</span>
<span class="p">};</span></code></pre></div>

<p>指定HTTP头信息，也是在options对象中设定。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span><span class="s1">'custom'</span><span class="o">:</span> <span class="s1">'Custom Header Demo works'</span><span class="p">}</span>
<span class="p">};</span></code></pre></div>

<span id="toc22"></span><h3 id="搭建https服务器">搭建HTTPs服务器</h3>

<p>搭建HTTPs服务器需要有SSL证书。对于向公众提供服务的网站，SSL证书需要向证书颁发机构购买；对于自用的网站，可以自制。</p>

<p>自制SSL证书需要OpenSSL，具体命令如下。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">openssl genrsa -out key.pem
openssl req -new -key key.pem -out csr.pem
openssl x509 -req -days <span class="m">9999</span> -in csr.pem -signkey key.pem -out cert.pem
rm csr.pem</code></pre></div>

<p>上面的命令生成两个文件：ert.pem（证书文件）和 key.pem（私钥文件）。有了这两个文件，就可以运行HTTPs服务器了。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'https'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">key</span><span class="o">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">'key.pem'</span><span class="p">),</span>
  <span class="nx">cert</span><span class="o">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">'cert.pem'</span><span class="p">)</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">"hello world\n"</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span></code></pre></div>

<p>上面代码显示，HTTPs服务器与HTTP服务器的最大区别，就是createServer方法多了一个options参数。运行以后，就可以测试是否能够正常访问。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl -k https://localhost:8000</code></pre></div>

<span id="toc23"></span><div class="chapter"><h2 id="buffer对象">Buffer对象</h2></div>

<p>Buffer对象是Node.js用来处理二进制数据的一个接口。它是一个构造函数，它的实例代表了V8引擎分配的一段内存。</p>

<p>Buffer对象可以用new命令生成一个实例，它的参数就是存入内存的数据。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">hello</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">);</span>
<span class="c1">// &lt;Buffer 48 65 6c 6c 6f&gt;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hello</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="c1">// "Hello"</span>
</code></pre></div>
<p>上面代码表示，hello是一个Buffer，内容为储存在内存中的五个字符的二进制数据，使用toString方法可以看到对应的字符串。</p>

<p>toString方法可以只返回指定位置内存的内容，它的第二个参数表示起始位置，第三个参数表示终止位置，两者都是从0开始计算。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'just some data'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'ascii'</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">));</span>
<span class="c1">// "some"</span>
</code></pre></div>
<p>除了使用字符串参数，生成Buffer实例，还可以使用十六进制数据。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">hello</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">([</span><span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">]);</span>
</code></pre></div>
<p>构造函数Buffer的参数，如果是一个数值，就表示所生成的实例占据内存多少个字节。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">buf</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'He'</span><span class="p">);</span>
<span class="nx">buf</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'l'</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">buf</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'lo'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="c1">// "Hello"</span>
</code></pre></div>
<p>Buffer实例的write方法，可以向所指定的内存写入数据。它的第一个参数是所写入的内容，第二个参数是所写入的起始位置（从0开始）。所以，上面代码最后写入内存的内容是Hello。</p>

<p>Buffer实例的length属性，返回Buffer实例所占据的内存长度。如果想知道一个字符串所占据的字节长度，可以将其传入Buffer.byteLength方法。</p>

<p>Buffer实例的slice方法，返回一个按照指定位置、从原对象切割出来的Buffer实例。它的两个参数分别为切割的起始位置和终止位置。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'just some data'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">chunk</span> <span class="o">=</span> <span class="nx">buf</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">chunk</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="c1">// "some"</span>
</code></pre></div>
<span id="toc24"></span><div class="chapter"><h2 id="cluster模块">cluster模块</h2></div>

<p>Node.js默认单进程运行，对于多核CPU的计算机来说，这样做效率很低，因为只有一个核在运行，其他核都在闲置。cluster模块就是为了解决这个问题而提出的。</p>

<p>cluster模块允许设立一个主进程和若干个worker进程，由主进程监控和协调worker进程的运行。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">cluster</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cluster'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">os</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'os'</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">cluster</span><span class="p">.</span><span class="nx">isMaster</span><span class="p">){</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">cpus</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">){</span>
        <span class="nx">cluster</span><span class="p">.</span><span class="nx">fork</span><span class="p">();</span>
      <span class="p">}</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">"hello world\n"</span><span class="p">);</span>
      <span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>上面代码先判断当前进程是否为主进程（cluster.isMaster），如果是的，就按照CPU的核数，新建若干个worker进程；如果不是，说明当前进程是worker进程，则在该进程启动一个服务器程序。</p>

<span id="toc25"></span><div class="chapter"><h2 id="参考链接" class="reference">参考链接</h2></div>

<ul class="reference-list">
<li>Cody Lindley, <a href="http://tech.pro/tutorial/1190/package-managers-an-introductory-guide-for-the-uninitiated-front-end-developer">Package Managers: An Introductory Guide For The Uninitiated Front-End Developer</a></li>
<li>Stack Overflow, <a href="http://stackoverflow.com/questions/1884724/what-is-node-js">What is Node.js?</a></li>
<li>Andrew Burgess, <a href="http://dev.tutsplus.com/tutorials/using-nodes-event-module--net-35941">Using Node's Event Module</a></li>
<li>James Halliday, <a href="http://substack.net/task_automation_with_npm_run">task automation with npm run</a>- Romain Prieto, <a href="http://www.asyncdev.net/2013/12/working-on-related-node-modules-locally/">Working on related Node.js modules locally</a></li>
<li>Alon Salant, <a href="http://bites.goodeggs.com/posts/export-this/">Export This: Interface Design Patterns for Node.js Modules</a></li>
<li>Node.js Manual &amp; Documentation, <a href="http://nodejs.org/api/modules.html">Modules</a></li>
<li>Brent Ertz, <a href="http://quickleft.com/blog/creating-and-publishing-a-node-js-module">Creating and publishing a node.js module</a></li>
<li>Fred K Schott, <a href="http://fredkschott.com/post/2014/02/npm-no-longer-defaults-to-tildes/">"npm install --save" No Longer Using Tildes</a></li>
</ul>


</div></div></article>

<div class="row">
    <div class="twelve columns">

<sectioni id="feature">

<h2>功能链接</h2>

<ul>

	<li><a href="https://github.com/ruanyf/jstutorial/issues">论坛</a></li>
	<li><a href="https://raw.github.com/ruanyf/jstutorial/gh-pages/nodejs/basic.md">Markdown源码</a></li>
	<li><a href="https://github.com/ruanyf/jstutorial/commits/gh-pages/nodejs/basic.md">修订历史</a></li>

</ul>

<h2>留言</h2>

<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./basic_files/saved_resource.htm" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 988px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="dsq-indicator-north" data-disqus-uid="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 910px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 910px !important; max-width: 910px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe><iframe id="dsq-indicator-south" data-disqus-uid="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 910px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 910px !important; max-width: 910px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jstutorial'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>
    



</sectioni></div>
</div>

<footer>
<div class="row">
<div class="twelve columns">
	<p><a href="http://javascript.ruanyifeng.com/introduction/license.html">版权声明</a> | last modified on 2013-12-04 </p>
</div>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43771063-1', 'ruanyifeng.com');
  ga('send', 'pageview');
</script>




</body></html>