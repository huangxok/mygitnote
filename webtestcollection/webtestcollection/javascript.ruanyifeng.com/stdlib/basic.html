<!DOCTYPE html>
<!-- saved from url=(0051)http://javascript.ruanyifeng.com/stdlib/object.html -->
<html class="no-js" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width">

  <title>Object对象 -- JavaScript 标准参考教程（alpha）</title>
  
  <!-- Included CSS Files (Uncompressed) -->
  <!--
  <link rel="stylesheet" href="stylesheets/foundation.css">
  -->
  
  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="http://javascript.ruanyifeng.com/css/foundation.css">
  <link rel="stylesheet" href="http://javascript.ruanyifeng.com/css/main.css">

  <!-- IE Fix for HTML5 Tags -->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <script async="" src="./basic_files/analytics.js"></script><script src="./basic_files/jquery.js"></script>
  <script src="./basic_files/toc.js"></script>
  <script src="./basic_files/main.js"></script>

<script type="text/javascript" async="" src="./basic_files/embed.js"></script></head>
<body>

<header class="top-bar" id="header">

<div class="fixed">

<nav class="top-bar">
<ul>
<!-- Title Area -->
	<li class="name has-dropdown">
	<h1><a href="http://javascript.ruanyifeng.com/">JavaScript 标准参考教程（alpha） </a></h1>
		<ul class="dropdown">
			
			<li><a href="http://javascript.ruanyifeng.com/#introduction">导论</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#grammar">基本语法</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#stdlib">标准库</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#oop">面向对象编程</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#dom">DOM</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#bom">浏览器对象</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#htmlapi">HTML网页的API</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#jquery">jQuery</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#tool">开发工具</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#advanced">高级语法</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#appendix">附录</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#library">草稿一：函数库</a></li>
			
			<li><a href="http://javascript.ruanyifeng.com/#nodejs">草稿二：Node.js</a></li>
			
		</ul>
	</li>
</ul>

<section>


<ul class="left">
<li class="divider"></li>
<li class="has-dropdown"><a class="active" href="http://javascript.ruanyifeng.com/stdlib/object.html#"> 标准库 </a><ul class="dropdown">









<li><a href="http://javascript.ruanyifeng.com/stdlib/array.html">Array 对象</a></li>





<li><a href="http://javascript.ruanyifeng.com/stdlib/arraybuffer.html">ArrayBuffer：类型化数组</a></li>



































<li><a href="http://javascript.ruanyifeng.com/stdlib/date.html">Date对象</a></li>



























































<li><a href="http://javascript.ruanyifeng.com/stdlib/json.html">JSON对象</a></li>









<li><a href="http://javascript.ruanyifeng.com/stdlib/math.html">Math对象</a></li>





















<li><a href="http://javascript.ruanyifeng.com/stdlib/number.html">Number对象</a></li>









<li class="active"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#">Object对象</a></li>























<li><a href="http://javascript.ruanyifeng.com/stdlib/regexp.html">RegExp对象</a></li>

















<li><a href="http://javascript.ruanyifeng.com/stdlib/string.html">String对象</a></li>



































<li><a href="http://javascript.ruanyifeng.com/stdlib/wrapper.html">包装对象和Boolean对象</a></li>



</ul></li>
<li class="divider"></li>
<li class="has-dropdown nav-3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#"> Object对象</a><ul class="dropdown">
<li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc0">概述</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc1">Object对象的方法</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc6">Object实例对象的方法</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc10">对象的属性模型</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc19">控制对象状态</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc27">参考链接</a></li></ul></li>
</ul>


<ul class="right">
	<li class="divider"></li>
	<li>
		<a href="https://github.com/ruanyf/jstutorial" target="_blank">GitHub <i class="foundicon-edit"></i></a>
	</li>
	<li class="divider"></li>
	<li>
		<a href="http://javascript.ruanyifeng.com/stdlib/object.html#">TOP <i class="foundicon-up-arrow"></i></a>
	</li>
</ul>

</section>

</nav>  
</div>
</header>


<article class="bookPage">

  <div class="row">
    <div class="twelve columns">

<h1> Object对象 </h1>

<aside class="right"><p>来自<a href="http://javascript.ruanyifeng.com/">《JavaScript 标准参考教程（alpha）》</a>，by 阮一峰</p></aside>

<h2>目录</h2><div id="toc" class="panel callout radius"><ul><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc0">概述</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc1">Object对象的方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc2">Object()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc3">Object.keys()，Object.getOwnPropertyNames()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc4">Object.observe()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc5">其他方法</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc6">Object实例对象的方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc7">Object.prototype.valueOf()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc8">Object.prototype.toString()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc9">toString()的应用：判断数据类型</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc10">对象的属性模型</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc11">属性的attributes对象，Object.getOwnPropertyDescriptor()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc12">Object.defineProperty()，Object.defineProperties()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc13">可枚举性（enumerable）</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc14">Object.getOwnPropertyNames()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc15">Object.prototype.propertyIsEnumerable()</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc16">可配置性（configurable）</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc17">可写性（writable）</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc18">存取函数（accessor）</a></li><li class="toc-h2"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc19">控制对象状态</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc20">Object.preventExtensions方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc21">Object.isExtensible方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc22">Object.seal方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc23">Object.isSealed方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc24">Object.freeze方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc25">Object.isFrozen方法</a></li><li class="toc-h3"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc26">局限性</a></li><li class="toc-h2 toc-active"><a href="http://javascript.ruanyifeng.com/stdlib/object.html#toc27">参考链接</a></li></ul></div>


<span id="toc0"></span><div class="chapter"><h2 id="概述">概述</h2></div>

<p>JavaScript原生提供一个Object对象（注意起首的O是大写），所有其他对象都继承自这个对象。Object本身也是一个构造函数，可以直接通过它来生成新对象。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span></code></pre></div>

<p>Object作为构造函数使用时，可以接受一个参数。如果该参数是一个对象，则直接返回这个对象；如果是一个原始类型的值，则返回该值对应的包装对象。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="nx">o1</span><span class="p">);</span>
<span class="nx">o1</span> <span class="o">===</span> <span class="nx">o2</span> <span class="c1">// true</span>

<span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="k">instanceof</span> <span class="nb">Number</span>
<span class="c1">// true</span></code></pre></div>

<blockquote>
<p>注意，通过new Object() 的写法生成新对象，与字面量的写法 o = {} 是等价的。</p>
</blockquote>

<p>与其他构造函数一样，如果要在Object对象上面部署一个方法，有两种做法。</p>

<p><strong>（1）部署在Object对象本身</strong></p>

<p>比如，在Object对象上面定义一个print方法，显示其他对象的内容。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">};</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">print</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
<span class="c1">// Object</span></code></pre></div>

<p><strong>（2）部署在Object.prototype对象</strong></p>

<p>所有构造函数都有一个prototype属性，指向一个原型对象。凡是定义在Object.prototype对象上面的属性和方法，将被所有实例对象共享。（关于prototype属性的详细解释，参见《面向对象编程》一章。）</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)};</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">print</span><span class="p">()</span> <span class="c1">// Object</span></code></pre></div>

<p>上面代码在Object.prototype定义了一个print方法，然后生成一个Object的实例o。o直接继承了Object.prototype的属性和方法，可以在自身调用它们，也就是说，o对象的print方法实质上是调用Object.prototype.print方法。。</p>

<p>可以看到，尽管上面两种写法的print方法功能相同，但是用法是不一样的，因此必须区分“构造函数的方法”和“实例对象的方法”。</p>

<span id="toc1"></span><div class="chapter"><h2 id="object对象的方法">Object对象的方法</h2></div>

<span id="toc2"></span><h3 id="object()">Object()</h3>

<p>Object本身当作工具方法使用时，可以将任意值转为对象。其中，原始类型的值转为对应的包装对象（参见《原始类型的包装对象》一节）。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">()</span> <span class="c1">// 返回一个空对象</span>
<span class="nb">Object</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span> <span class="c1">// 返回一个空对象</span>
<span class="nb">Object</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span> <span class="c1">// 返回一个空对象</span>

<span class="nb">Object</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// 等同于 new Number(1)</span>
<span class="nb">Object</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span> <span class="c1">// 等同于 new String('foo')</span>
<span class="nb">Object</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// 等同于 new Boolean(true)</span>

<span class="nb">Object</span><span class="p">([])</span> <span class="c1">// 返回原数组</span>
<span class="nb">Object</span><span class="p">({})</span> <span class="c1">// 返回原对象</span>
<span class="nb">Object</span><span class="p">(</span><span class="kd">function</span><span class="p">(){})</span> <span class="c1">// 返回原函数</span></code></pre></div>

<p>上面代码表示Object函数将各种值，转为对应的对象。</p>

<p>如果Object函数的参数是一个对象，它总是返回原对象。利用这一点，可以写一个判断变量是否为对象的函数。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">isObject</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<span id="toc3"></span><h3 id="object.keys()，object.getownpropertynames()">Object.keys()，Object.getOwnPropertyNames()</h3>

<p>Object.keys方法和Object.getOwnPropertyNames方法很相似，一般用来遍历对象的属性。它们的参数都是一个对象，都返回一个数组，该数组的成员都是对象自身的（而不是继承的）所有属性名。它们的区别在于，Object.keys方法只返回可枚举的属性（关于可枚举性的详细解释见后文），Object.getOwnPropertyNames方法还返回不可枚举的属性名。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">p1</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="nx">p2</span><span class="o">:</span> <span class="mi">456</span>
<span class="p">};</span> 

<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
<span class="c1">// ["p1", "p2"]</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
<span class="c1">// ["p1", "p2"]</span></code></pre></div>

<p>上面的代码表示，对于一般的对象来说，这两个方法返回的结果是一样的。只有涉及不可枚举属性时，才会有不一样的结果。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Hello"</span><span class="p">,</span> <span class="s2">"World"</span><span class="p">];</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> 
<span class="c1">// ["0", "1"]</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<span class="c1">// ["0", "1", "length"]</span>
</code></pre></div>
<p>上面代码中，数组的length属性是不可枚举的属性，所以只出现在Object.getOwnPropertyNames方法的返回结果中。</p>

<p>由于JavaScript没有提供计算对象属性个数的方法，所以可以用这两个方法代替。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">).</span><span class="nx">length</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">o</span><span class="p">).</span><span class="nx">length</span>
</code></pre></div>
<p>一般情况下，几乎总是使用Object.keys方法，遍历数组的属性。</p>

<span id="toc4"></span><h3 id="object.observe()">Object.observe()</h3>

<p>Object.observe方法用于观察对象属性的变化。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">changes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">change</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">change</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">change</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">change</span><span class="p">.</span><span class="nx">oldValue</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// add, 'foo', undefined</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// update, 'foo', 1</span>
<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span> <span class="c1">// delete, 'foo', 2</span></code></pre></div>

<p>上面代码表示，通过Object.observe函数，对o对象指定回调函数。一旦o对象的属性出现任何变化，就会调用回调函数，回调函数通过一个参数对象读取o的属性变化的信息。</p>

<p>该方法非常新，只有Chrome浏览器的最新版本才部署。</p>

<span id="toc5"></span><h3 id="其他方法">其他方法</h3>

<p>除了上面提到的方法，Object还有不少其他方法，将在后文逐一详细介绍。</p>

<p><strong>（1）对象属性模型的相关方法</strong></p>

<ul>
<li>Object.getOwnPropertyDescriptor()：获取某个属性的attributes对象。</li>
<li>Object.defineProperty()：通过attributes对象，定义某个属性。</li>
<li>Object.defineProperties()：通过attributes对象，定义多个属性。</li>
<li>Object.getOwnPropertyNames()：返回直接定义在某个对象上面的全部属性的名称。</li>
</ul>

<p><strong>（2）控制对象状态的方法</strong></p>

<ul>
<li>Object.preventExtensions()：防止对象扩展。</li>
<li>Object.isExtensible()：判断对象是否可扩展。</li>
<li>Object.seal()：禁止对象配置。</li>
<li>Object.isSealed()：判断一个对象是否可配置。</li>
<li>Object.freeze()：冻结一个对象。</li>
<li>Object.isFrozen()：判断一个对象是否被冻结。</li>
</ul>

<p><strong>（3）原型链相关方法</strong></p>

<ul>
<li>Object.create()：生成一个新对象，并该对象的原型。</li>
<li>Object.getPrototypeOf()：获取对象的Prototype对象。</li>
</ul>

<span id="toc6"></span><div class="chapter"><h2 id="object实例对象的方法">Object实例对象的方法</h2></div>

<p>除了Object对象本身的方法，还有不少方法是部署在Object.prototype对象上的，所有Object的实例对象都继承了这些方法。</p>

<p>Object实例对象的方法，主要有以下六个。</p>

<ul>
<li>valueOf()：返回当前对象对应的值。</li>
<li>toString()：返回当前对象对应的字符串形式。</li>
<li>toLocalString()：返回当前对象对应的本地字符串形式。</li>
<li>hasOwnProperty()：判断某个属性是否为当前对象自身的属性，还是继承自原型对象的属性。</li>
<li>isPrototypeOf()：判断当前对象是否为另一个对象的原型。</li>
<li>propertyIsEnumerable()：判断某个属性是否可枚举。</li>
</ul>

<p>本节介绍前两个方法，其他方法将在后文相关章节介绍。</p>

<span id="toc7"></span><h3 id="object.prototype.valueof()">Object.prototype.valueOf()</h3>

<p>valueOf方法的作用是返回一个对象的值，默认情况下返回对象本身。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">===</span> <span class="nx">o</span> <span class="c1">// true</span></code></pre></div>

<p>上面代码比较o的valueOf方法返回值与o本身，两者是一样的。</p>

<p>valueOf方法的主要用途是，JavaScript自动类型转换时会默认调用这个方法（详见上一章《数据类型转换》一节）。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="mi">1</span> <span class="o">+</span> <span class="nx">o</span> <span class="c1">// "1[object Object]"</span></code></pre></div>

<p>上面代码将对象o与数字1相加，这时JavaScript就会默认调用valueOf()方法。所以，如果自定义valueOf方法，就可以得到想要的结果。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">valueOf</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span><span class="k">return</span> <span class="mi">2</span><span class="p">;};</span>

<span class="mi">1</span> <span class="o">+</span> <span class="nx">o</span> <span class="c1">// 3</span></code></pre></div>

<p>上面代码自定义了o对象的valueOf方法，于是1 + o就得到了3。这种方法就相当于用o.valueOf覆盖Object.prototype.valueOf。</p>

<span id="toc8"></span><h3 id="object.prototype.tostring()">Object.prototype.toString()</h3>

<p>toString方法的作用是返回一个对象的字符串形式。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
<span class="nx">o1</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// "[object Object]"</span>

<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">};</span>
<span class="nx">o2</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// "[object Object]"</span></code></pre></div>

<p>上面代码表示，对于一个对象调用toString方法，会返回字符串[object Object]。</p>

<p>字符串[object Object]本身没有太大的用处，但是通过自定义toString方法，可以让对象在自动类型转换时，得到想要的字符串形式。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span> <span class="k">return</span> <span class="s1">'hello'</span> <span class="p">};</span> 

<span class="nx">o</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="s1">'world'</span> <span class="c1">// "hello world"</span></code></pre></div>

<p>上面代码表示，当对象用于字符串加法时，会自动调用toString方法。由于自定义了toString方法，所以返回字符串hello world。</p>

<p>数组、字符串和函数都分别部署了自己版本的toString方法。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// "1,2,3"</span>

<span class="s1">'123'</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// "123"</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">(){</span><span class="k">return</span> <span class="mi">123</span><span class="p">}).</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// "function (){return 123}"</span></code></pre></div>

<span id="toc9"></span><h3 id="tostring()的应用：判断数据类型">toString()的应用：判断数据类型</h3>

<p>toString方法的主要用途是返回对象的字符串形式，除此之外，还有一个重要的作用，就是判断一个值的类型。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// "[object Object]"</span></code></pre></div>

<p>上面代码调用空对象的toString方法，结果返回一个字符串“object Object”，其中第二个Object表示该值的准确类型。这是一个十分有用的判断数据类型的方法。</p>

<p>实例对象的toString方法，实际上是调用Object.prototype.toString方法。使用call方法，可以在任意值上调用Object.prototype.toString方法，从而帮助我们判断这个值的类型。不同数据类型的toString方法返回值如下：</p>

<ul>
<li>数值：返回[object Number]。</li>
<li>字符串：返回[object String]。</li>
<li>布尔值：返回[object Boolean]。</li>
<li>undefined：返回[object Undefined]。</li>
<li>null：返回[object Null]。</li>
<li>对象：返回"[object " + 构造函数的名称 + "]" 。</li>
</ul>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">// "[object Number]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span> <span class="c1">// "[object String]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// "[object Boolean]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span> <span class="c1">// "[object Undefined]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span> <span class="c1">// "[object Null]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nb">Math</span><span class="p">)</span> <span class="c1">// "[object Math]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">({})</span> <span class="c1">// "[object Object]"</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">([])</span> <span class="c1">// "[object Array]"</span></code></pre></div>

<p>可以利用这个特性，写出一个比typeof运算符更准确的类型判断函数。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">o</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\[object (.*?)\]/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">type</span><span class="p">({});</span> <span class="c1">// "object"</span>
<span class="nx">type</span><span class="p">([]);</span> <span class="c1">// "array"</span>
<span class="nx">type</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// "number"</span>
<span class="nx">type</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span> <span class="c1">// "null"</span>
<span class="nx">type</span><span class="p">();</span> <span class="c1">// "undefined"</span>
<span class="nx">type</span><span class="p">(</span><span class="sr">/abcd/</span><span class="p">);</span> <span class="c1">// "regex"</span>
<span class="nx">type</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span> <span class="c1">// "date"</span></code></pre></div>

<p>在上面这个type函数的基础上，还可以加上专门判断某种类型数据的方法。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="s1">'Null'</span><span class="p">,</span>
 <span class="s1">'Undefined'</span><span class="p">,</span>
 <span class="s1">'Object'</span><span class="p">,</span>
 <span class="s1">'Array'</span><span class="p">,</span>
 <span class="s1">'String'</span><span class="p">,</span>
 <span class="s1">'Number'</span><span class="p">,</span>
 <span class="s1">'Boolean'</span><span class="p">,</span>
 <span class="s1">'Function'</span><span class="p">,</span>
 <span class="s1">'RegExp'</span><span class="p">,</span>
 <span class="s1">'Element'</span><span class="p">,</span>
 <span class="s1">'NaN'</span><span class="p">,</span>
 <span class="s1">'Infinite'</span>
<span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">type</span><span class="p">[</span><span class="s1">'is'</span> <span class="o">+</span> <span class="nx">t</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">type</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span> <span class="nx">t</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="p">};</span>
<span class="p">});</span>

<span class="nx">type</span><span class="p">.</span><span class="nx">isObject</span><span class="p">({});</span> <span class="c1">// true</span>
<span class="nx">type</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="kc">NaN</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nx">type</span><span class="p">.</span><span class="nx">isElement</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">));</span> <span class="c1">// true</span>
<span class="nx">type</span><span class="p">.</span><span class="nx">isRegExp</span><span class="p">(</span><span class="sr">/abc/</span><span class="p">);</span> <span class="c1">// true</span></code></pre></div>

<span id="toc10"></span><div class="chapter"><h2 id="对象的属性模型">对象的属性模型</h2></div>

<p>ECMAScript 5对于对象的属性，提出了一个精确的描述模型。</p>

<span id="toc11"></span><h3 id="属性的attributes对象，object.getownpropertydescriptor()">属性的attributes对象，Object.getOwnPropertyDescriptor()</h3>

<p>在JavaScript内部，每个属性都有一个对应的attributes对象，保存该属性的一些元信息。使用Object.getOwnPropertyDescriptor方法，可以读取attributes对象。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span> <span class="s1">'a'</span> <span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">'p'</span><span class="p">)</span> 
<span class="c1">// Object { value: "a", </span>
<span class="c1">//         writable: true, </span>
<span class="c1">//         enumerable: true, </span>
<span class="c1">//         configurable: true</span>
<span class="c1">// }</span></code></pre></div>

<p>上面代码表示，使用Object.getOwnPropertyDescriptor方法，读取o对象的p属性的attributes对象。</p>

<p>attributes对象包含如下元信息：</p>

<ul>
<li><p><strong>value</strong>：表示该属性的值，默认为undefined。</p></li>
<li><p><strong>writable</strong>：表示该属性的值（value）是否可以改变，默认为true。</p></li>
<li><p><strong>enumerable</strong>： 表示该属性是否可枚举，默认为true，也就是该属性会出现在for...in和Object.keys()等操作中。</p></li>
<li><p><strong>configurable</strong>：表示“可配置性”，默认为true。如果设为false，表示无法删除该属性，也不得改变attributes对象（value属性除外），也就是configurable属性控制了attributes对象的可写性。</p></li>
<li><p><strong>get</strong>：表示该属性的取值函数（getter），默认为undefined。</p></li>
<li><p><strong>set</strong>：表示该属性的存值函数（setter），默认为undefined。</p></li>
</ul>

<span id="toc12"></span><h3 id="object.defineproperty()，object.defineproperties()">Object.defineProperty()，Object.defineProperties()</h3>

<p>Object.defineProperty方法允许通过定义attributes对象，来定义或修改一个属性，然后返回修改后的对象。它的格式如下：</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">propertyName</span><span class="p">,</span> <span class="nx">attributesObject</span><span class="p">)</span>
<span class="err">股当</span>
</code></pre></div>
<p>Object.defineProperty方法接受三个参数，第一个是属性所在的对象，第二个是属性名（它应该是一个字符串），第三个是属性的描述对象。比如，新建一个o对象，并定义它的p属性，可以这样写：</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s2">"p"</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">value</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p</span>
<span class="c1">// 123</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">246</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span>
<span class="c1">// 123</span>
<span class="c1">// 因为writable为false，所以无法改变该属性的值</span></code></pre></div>

<p>如果一次性定义或修改多个属性，可以使用Object.defineProperties方法。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">({},</span> <span class="p">{</span>
        <span class="nx">p1</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="nx">p2</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">"abc"</span><span class="p">,</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="nx">p3</span><span class="o">:</span> <span class="p">{</span> <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">p2</span> <span class="p">},</span>
              <span class="nx">enumerable</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
              <span class="nx">configurable</span><span class="o">:</span><span class="kc">true</span>
        <span class="p">}</span>
<span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p1</span> <span class="c1">// 123</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p2</span> <span class="c1">// "abc"</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p3</span> <span class="c1">// "123abc"</span></code></pre></div>

<p>上面代码中的p3属性，定义了取值函数get。这时需要注意的是，一旦定义了取值函数get（或存值函数set），就不能将writable设为true，或者同时定义value属性，否则会报错。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"p"</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span> 
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">456</span><span class="p">;</span> <span class="p">}</span> 
<span class="p">});</span>
<span class="c1">// TypeError: Invalid property. </span>
<span class="c1">// A property cannot both have accessors and be writable or have a value,</span>
</code></pre></div>
<p>上面代码同时定义了get属性和value属性，结果就报错。</p>

<p>Object.defineProperty() 和Object.defineProperties() 的第三个参数，是一个属性对象。它的writable、configurable、enumerable这三个属性的默认值都为false。</p>

<p>writable属性为false，表示对应的属性的值将不得改写。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"p"</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s2">"bar"</span>
<span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// bar</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s2">"foobar"</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// bar</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"p"</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s2">"foobar"</span><span class="p">,</span>
<span class="p">});</span>
<span class="c1">// TypeError: Cannot redefine property: p</span>
</code></pre></div>
<p>上面代码由于writable属性默认为false，导致无法对p属性重新赋值，但是不会报错（严格模式下会报错）。不过，如果再一次使用Object.defineProperty方法对value属性赋值，就会报错。</p>

<p>configurable属性为false，将无法删除该属性，也无法修改attributes对象（value属性除外）。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"p"</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// bar</span>
</code></pre></div>
<p>上面代码中，由于configurable属性默认为false，导致无法删除某个属性。</p>

<p>enumerable属性为false，表示对应的属性不会出现在for...in循环和Object.keys方法中。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">p1</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">p2</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
<span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"p3"</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">o</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="c1">// p1 10 </span>
<span class="c1">// p2 13</span>
</code></pre></div>
<p>上面代码中，p3属性是用Object.defineProperty方法定义的，由于enumerable属性默认为false，所以不出现在for...in循环中。</p>

<span id="toc13"></span><h3 id="可枚举性（enumerable）">可枚举性（enumerable）</h3>

<p>可枚举性（enumerable）用来控制所描述的属性，是否将被包括在for...in循环之中。具体来说，如果一个属性的enumerable为false，下面三个操作不会取到该属性。</p>

<ul>
<li>for..in循环</li>
<li>Object.keys方法</li>
<li>JSON.stringify方法</li>
</ul>

<p>因此，enumerable可以用来设置“秘密”属性。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span><span class="mi">2</span><span class="p">};</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">d</span>
<span class="c1">// 4</span>

<span class="k">for</span><span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">o</span> <span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">o</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="p">);</span> 
<span class="c1">// 1</span>
<span class="c1">// 2</span>
<span class="c1">// 3</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>  <span class="c1">// ["a", "b", "c"]</span>

<span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">o</span> <span class="c1">// =&gt; "{a:1,b:2,c:3}"</span>
</code></pre></div>
<p>上面代码中，d属性的enumerable为false，所以一般的遍历操作都无法获取该属性，使得它有点像“秘密”属性，但还是可以直接获取它的值。</p>

<p>至于for...in循环和Object.keys方法的区别，在于前者包括对象继承自原型对象的属性，而后者只包括对象本身的属性。如果需要获取对象自身的所有属性，不管enumerable的值，可以使用Object.getOwnPropertyNames方法，详见下文。</p>

<p>考虑到JSON.stringify方法会排除enumerable为false的值，有时可以利用这一点，为对象添加注释信息。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">car</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">id</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span>
  <span class="nx">color</span><span class="o">:</span> <span class="nx">red</span><span class="p">,</span>
  <span class="nx">owner</span><span class="o">:</span> <span class="mi">12</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">owner</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">id</span><span class="o">:</span> <span class="mi">12</span><span class="p">,</span>
  <span class="nx">name</span><span class="o">:</span> <span class="nx">Javi</span>
<span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span> <span class="nx">car</span><span class="p">,</span> <span class="s1">'ownerOb'</span><span class="p">,</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="nx">owner</span><span class="p">}</span> <span class="p">);</span>
<span class="nx">car</span><span class="p">.</span><span class="nx">ownerOb</span> <span class="c1">// {id:12, name:Javi}</span>

<span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">car</span><span class="p">)</span> <span class="c1">//  '{id: 123, color: "red", owner: 12}'</span>
</code></pre></div>
<p>上面代码中，owner对象作为注释，加入car对象。由于ownerOb属性的enumerable为false，所以JSON.stringify最后正式输出car对象时，会忽略ownerOb属性。</p>

<span id="toc14"></span><h3 id="object.getownpropertynames()">Object.getOwnPropertyNames()</h3>

<p>Object.getOwnPropertyNames方法返回直接定义在某个对象上面的全部属性的名称，而不管该属性是否可枚举。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">({},</span> <span class="p">{</span>
        <span class="nx">p1</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="nx">p2</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
<span class="c1">// ["p1", "p2"]</span></code></pre></div>

<p>一般来说，系统原生的属性（即非用户自定义的属性）都是不可枚举的。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 比如，数组实例自带length属性是不可枚举的</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">([])</span> <span class="c1">// []</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">([])</span> <span class="c1">// [ 'length' ]</span>

<span class="c1">// Object.prototype对象的自带属性也都是不可枚举的</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span> <span class="c1">// []</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span>
<span class="c1">// ['hasOwnProperty',</span>
<span class="c1">//  'valueOf',</span>
<span class="c1">//  'constructor',</span>
<span class="c1">//  'toLocaleString',</span>
<span class="c1">//  'isPrototypeOf',</span>
<span class="c1">//  'propertyIsEnumerable',</span>
<span class="c1">//  'toString']</span></code></pre></div>

<p>上面代码可以看到，数组的实例对象（[]）没有可枚举属性，不可枚举属性有length；Object.prototype对象也没有可枚举属性，但是有不少不可枚举属性。</p>

<span id="toc15"></span><h3 id="object.prototype.propertyisenumerable()">Object.prototype.propertyIsEnumerable()</h3>

<p>对象实例的propertyIsEnumerable方法用来判断一个属性是否可枚举。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s2">"p"</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s2">"toString"</span><span class="p">)</span> <span class="c1">// false</span></code></pre></div>

<p>上面代码中，用户自定义的p属性是可枚举的，而继承自原型对象的toString属性是不可枚举的。</p>

<span id="toc16"></span><h3 id="可配置性（configurable）">可配置性（configurable）</h3>

<p>可配置性（configurable）决定了是否可以修改属性的描述对象。也就是说，当configure为false的时候，value、writable、enumerable和configurable都不能被修改了。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> 
        <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> 
        <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="c1">// TypeError: Cannot redefine property: p</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="c1">// TypeError: Cannot redefine property: p</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="c1">// TypeError: Cannot redefine property: p</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,{</span><span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span>
<span class="c1">// TypeError: Cannot redefine property: p</span>

<span class="err">```</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">nameValue</span> <span class="o">=</span> <span class="s1">'Joe'</span><span class="p">;</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">nameValue</span> <span class="p">},</span> 
  <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span> <span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">//to enable redefining the property later</span>
<span class="p">});</span>

<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="c1">//Joe </span>
<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Bob'</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="c1">//Bob</span>
<span class="nx">nameValue</span> <span class="c1">//Bob</span>

<span class="err">上面代码首先生成对象</span><span class="nx">o</span><span class="err">，并且定义属性</span><span class="nx">p</span><span class="err">的</span><span class="nx">configurable</span><span class="err">为</span><span class="kc">false</span><span class="err">。然后，逐一改动</span><span class="nx">value</span><span class="err">、</span><span class="nx">writable</span><span class="err">、</span><span class="nx">enumerable</span><span class="err">、</span><span class="nx">configurable</span><span class="err">，结果都报错。</span>

<span class="err">需要注意的是，</span><span class="nx">writable</span><span class="err">只有在从</span><span class="kc">false</span><span class="err">改为</span><span class="kc">true</span><span class="err">会报错，从</span><span class="kc">true</span><span class="err">改为</span><span class="kc">false</span><span class="err">则是允许的。</span>

<span class="err">```</span><span class="nx">javascript</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">})</span>
<span class="c1">// 修改成功</span>
</code></pre></div>
<p>至于value，只要writable和configurable有一个为true，就可以改动。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o1</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="c1">// 修改成功</span>

<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o2</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="p">})</span> 
<span class="c1">// 修改成功</span>
</code></pre></div>
<p>可配置性决定了一个变量是否可以被删除（delete）。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">({},</span> <span class="p">{</span>
        <span class="nx">p1</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="nx">p2</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">configurable</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
<span class="p">});</span>

<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p1</span> <span class="c1">// true</span>
<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p2</span> <span class="c1">// false</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p1</span> <span class="c1">// undefined</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p2</span> <span class="c1">// 2</span></code></pre></div>

<p>上面代码中的对象o有两个属性，p1是可配置的，p2是不可配置的。结果，p2就无法删除。</p>

<p>需要注意的是，当使用var命令声明变量时，变量的configurable为false。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s1">'a1'</span><span class="p">)</span>
<span class="c1">// Object {</span>
<span class="c1">// value: 1, </span>
<span class="c1">// writable: true, </span>
<span class="c1">// enumerable: true, </span>
<span class="c1">// configurable: false</span>
<span class="c1">// }</span></code></pre></div>

<p>而不使用var命令声明变量时（或者使用属性赋值的方式声明变量），变量的可配置性为true。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">a2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s1">'a2'</span><span class="p">)</span>
<span class="c1">// Object {</span>
<span class="c1">// value: 1, </span>
<span class="c1">// writable: true, </span>
<span class="c1">// enumerable: true, </span>
<span class="c1">// configurable: true</span>
<span class="c1">// }</span>

<span class="c1">// 或者写成</span>

<span class="k">this</span><span class="p">.</span><span class="nx">a3</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s1">'a3'</span><span class="p">)</span>
<span class="c1">// Object {</span>
<span class="c1">// value: 1, </span>
<span class="c1">// writable: true, </span>
<span class="c1">// enumerable: true, </span>
<span class="c1">// configurable: true</span>
<span class="c1">// }</span></code></pre></div>

<p>上面代码中的<code>this.a3 = 1</code>与<code>a3 = 1</code>是等价的写法。this指的是当前的作用域，更多关于this的解释，参见《面向对象编程》一章。</p>

<p>这种差异意味着，如果一个变量是使用var命令生成的，就无法用delete命令删除。也就是说，delete只能删除对象的属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">a2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">delete</span> <span class="nx">a1</span> <span class="c1">// false</span>
<span class="k">delete</span> <span class="nx">a2</span> <span class="c1">// true</span>

<span class="nx">a1</span> <span class="c1">// 1</span>
<span class="nx">a2</span> <span class="c1">// ReferenceError: a2 is not defined</span></code></pre></div>

<span id="toc17"></span><h3 id="可写性（writable）">可写性（writable）</h3>

<p>可写性（writable）决定了属性的值（value）是否可以被改变。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{};</span> 

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span> <span class="o">:</span> <span class="mi">37</span><span class="p">,</span> <span class="nx">writable</span> <span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="c1">// 37</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="c1">// 37</span></code></pre></div>

<p>上面代码将o对象的a属性可写性设为false，然后改变这个属性的值，就不会有任何效果。</p>

<p>这实际上将某个属性的值变成了常量。在ES6中，constant命令可以起到这个作用，但在ES5中，只有通过writable达到同样目的。</p>

<p>这里需要注意的是，当对a属性重新赋值的时候，并不会抛出错误，只是静静地失败。但是，如果在严格模式下，这里就会抛出一个错误，即使是对a属性重新赋予一个同样的值。</p>

<p>关于可写性，还有一种特殊情况。就是如果原型对象的某个属性的可写性为false，那么派生对象将无法自定义这个属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">proto</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s1">'a'</span><span class="p">,</span>
    <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">proto</span><span class="p">);</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s1">'b'</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">foo</span> <span class="c1">// 'a'</span></code></pre></div>

<p>上面代码中，对象proto的foo属性不可写，结果proto的派生对象o，也不可以再自定义这个属性了。在严格模式下，这样做还会抛出一个错误。但是，有一个规避方法，就是通过覆盖attributes对象，绕过这个限制，原因是这种情况下，原型链会被完全忽视。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s1">'b'</span> <span class="p">});</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">foo</span> <span class="c1">// 'b'</span></code></pre></div>

<span id="toc18"></span><h3 id="存取函数（accessor）">存取函数（accessor）</h3>

<p>除了直接定义以外，属性还可以用存取函数（accessor）定义。其中，存值函数称为setter，使用set命令；取值函数称为getter，使用get命令。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span> <span class="nx">p</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">"getter"</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">set</span> <span class="nx">p</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"setter: "</span><span class="o">+</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>上面代码中，o对象内部的get和set命令，分别定义了p属性的取值函数和存值函数。定义了这两个函数之后，对p属性取值时，取值函数会自动调用；对p属性赋值时，存值函数会自动调用。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// getter</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">123</span> <span class="c1">// setter: 123</span></code></pre></div>

<p>存取函数往往用于，某个属性的值需要依赖对象内部数据的场合。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span><span class="p">{</span>
    <span class="nx">$n</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span>
    <span class="nx">get</span> <span class="nx">next</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$n</span><span class="o">++</span> <span class="p">},</span>
    <span class="nx">set</span> <span class="nx">next</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$n</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">$n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">throw</span> <span class="s2">"新的值必须大于当前值"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">next</span> <span class="c1">// 5</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">next</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">next</span> <span class="c1">//10</span></code></pre></div>

<p>上面代码中，next属性的存值函数和取值函数，都依赖于对内部属性$n的操作。</p>

<p>下面是另一个存取函数的例子。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">nameValue</span> <span class="o">=</span> <span class="s1">'Joe'</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">nameValue</span> <span class="p">},</span> 
  <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span> <span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="c1">//Joe </span>
<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">'Bob'</span><span class="p">;</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="c1">//Bob</span>
<span class="nx">nameValue</span> <span class="c1">//Bob</span>
</code></pre></div>
<p>上面代码使用存取函数，将user对象name绑定在nameValue属性上了。user = {}
nameValue = 'Joe';
Object.defineProperty(user, 'name', {
  get: function() { return nameValue }, 
  set: function(newValue) { nameValue = newValue; },
  configurable: true //to enable redefining the property later
});</p>

<p>user.name //Joe 
user.name = 'Bob'
user.name //Bob
nameValue //Bob</p>

<p>存取函数也可以使用Object.create方法定义。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span> 
          <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s1">'getter'</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'setter: '</span><span class="o">+</span><span class="nx">value</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
<span class="p">});</span></code></pre></div>

<p>如果使用上面这种写法，属性foo必须定义一个属性描述对象。该对象的get和set属性，分别是foo的取值函数和存值函数。</p>

<p>利用存取函数，可以实现数据对象与DOM对象的双向绑定。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
    <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">).</span><span class="nx">value</span> 
  <span class="p">},</span> 
  <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></div>
<p>上面代码使用存取函数，将DOM对象foo与数据对象user的name属性，实现了绑定。两者之中只要有一个对象发生变化，就能在另一个对象上实时反映出来。</p>

<span id="toc19"></span><div class="chapter"><h2 id="控制对象状态">控制对象状态</h2></div>

<p>JavaScript提供了三种方法，精确控制一个对象的读写状态，防止对象被改变。最弱一层的保护是preventExtensions，其次是seal，最强的freeze。 </p>

<span id="toc20"></span><h3 id="object.preventextensions方法">Object.preventExtensions方法</h3>

<p>Object.preventExtensions方法可以使得一个对象无法再添加新的属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"p"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">"hello"</span> <span class="p">});</span>
<span class="c1">// TypeError: Cannot define property:p, object is not extensible.</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// undefined</span></code></pre></div>

<p>如果是在严格模式下，则会抛出一个错误。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="s1">'use strict'</span><span class="p">;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s1">'1'</span> <span class="p">}());</span>
<span class="c1">// TypeError: Can't add property bar, object is not extensible</span></code></pre></div>

<p>不过，对于使用了preventExtensions方法的对象，可以用delete命令删除它的现有属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// undefined</span></code></pre></div>

<span id="toc21"></span><h3 id="object.isextensible方法">Object.isExtensible方法</h3>

<p>Object.isExtensible方法用于检查一个对象是否使用了preventExtensions方法。也就是说，该方法可以用来检查是否可以为一个对象添加属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
<span class="c1">// true</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
<span class="c1">// false</span></code></pre></div>

<p>上面代码新生成了一个o对象，对该对象使用Object.isExtensible方法，返回true，表示可以添加新属性。对该对象使用Object.preventExtensions方法以后，再使用Object.isExtensible方法，返回false，表示已经不能添加新属性了。</p>

<span id="toc22"></span><h3 id="object.seal方法">Object.seal方法</h3>

<p>Object.seal方法使得一个对象既无法添加新属性，也无法删除旧属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span><span class="s2">"hello"</span> <span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// "hello"</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="s1">'world'</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="c1">// undefined</span></code></pre></div>

<p>Object.seal还把现有属性的attributes对象的configurable属性设为false，使得attributes对象不再能改变。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span> <span class="s1">'a'</span> <span class="p">};</span>

<span class="c1">// seal方法之前</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">'p'</span><span class="p">)</span>
<span class="c1">// Object {value: "a", writable: true, enumerable: true, configurable: true}</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="c1">// seal方法之后</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">'p'</span><span class="p">)</span> 
<span class="c1">// Object {value: "a", writable: true, enumerable: true, configurable: false}</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span> <span class="p">})</span>
<span class="c1">// TypeError: Cannot redefine property: p</span></code></pre></div>

<p>从上面代码可以看到，使用seal方法之后，attributes对象的configurable就变成了false，然后如果想改变enumerable就会报错。</p>

<p>可写性（writable）有点特别。如果writable为false，使用Object.seal方法以后，将无法将其变成true；但是，如果writable为true，依然可以将其变成false。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o1</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o1</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,{</span><span class="nx">writable</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span> 
<span class="c1">// Uncaught TypeError: Cannot redefine property: p </span>

<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">({},</span> <span class="s1">'p'</span><span class="p">,</span> <span class="p">{</span><span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o2</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o2</span><span class="p">,</span><span class="s1">'p'</span><span class="p">,{</span><span class="nx">writable</span><span class="o">:</span><span class="kc">false</span><span class="p">})</span> 

<span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="nx">o2</span><span class="p">,</span> <span class="s1">'p'</span><span class="p">)</span>
<span class="cm">/* { value: '',</span>
<span class="cm">  writable: false,</span>
<span class="cm">  enumerable: true,</span>
<span class="cm">  configurable: false } */</span></code></pre></div>

<p>上面代码中，同样是使用了Object.seal方法，如果writable原为false，改变这个设置将报错；如果原为true，则不会有问题。</p>

<p>至于属性对象的value是否可改变，是由writable决定的。</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span> <span class="s1">'a'</span> <span class="p">};</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s1">'b'</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// 'b'</span>
</code></pre></div>
<p>上面代码中，Object.seal方法对p属性的value无效，是因为此时p属性的writable为true。</p>

<span id="toc23"></span><h3 id="object.issealed方法">Object.isSealed方法</h3>

<p>Object.isSealed方法用于检查一个对象是否使用了Object.seal方法。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span> <span class="s1">'a'</span> <span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="c1">// true</span></code></pre></div>

<p>另外，这时isExtensible方法也返回false。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span> <span class="s1">'a'</span> <span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="c1">// false</span></code></pre></div>
        

<span id="toc24"></span><h3 id="object.freeze方法">Object.freeze方法</h3>

<p>Object.freeze方法可以使得一个对象无法添加新属性、无法删除旧属性、也无法改变属性的值，使得这个对象实际上变成了常量。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">p</span><span class="o">:</span><span class="s2">"hello"</span><span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s2">"world"</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// hello</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="s2">"hello"</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">t</span> <span class="c1">// undefined</span></code></pre></div>

<p>上面代码中，对现有属性重新赋值（o.p = "world"）或者添加一个新属性，并不会报错，只是默默地失败。但是，如果是在严格模式下，就会报错。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">p</span><span class="o">:</span><span class="s2">"hello"</span><span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="c1">// 对现有属性重新赋值</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="s1">'use strict'</span><span class="p">;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="s2">"world"</span><span class="p">;}())</span>
<span class="c1">// TypeError: Cannot assign to read only property 'p' of #&lt;Object&gt;</span>

<span class="c1">// 添加不存在的属性</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="s1">'use strict'</span><span class="p">;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;}())</span>
<span class="c1">// TypeError: Can't add property t, object is not extensible</span></code></pre></div>

<span id="toc25"></span><h3 id="object.isfrozen方法">Object.isFrozen方法</h3>

<p>Object.isFrozen方法用于检查一个对象是否使用了Object.freeze()方法。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">p</span><span class="o">:</span><span class="s2">"hello"</span><span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="c1">// true</span></code></pre></div>

<span id="toc26"></span><h3 id="局限性">局限性</h3>

<p>需要注意的是，使用上面这些方法锁定对象的可写性，但是依然可以通过改变该对象的原型对象，来为它增加属性。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">proto</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

<span class="nx">proto</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="s2">"hello"</span><span class="p">;</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">t</span>
<span class="c1">// hello</span></code></pre></div>

<p>一种解决方案是，把原型也冻结住。</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span>
            <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">({</span><span class="nx">x</span><span class="o">:</span><span class="mi">1</span><span class="p">}),</span>
                <span class="p">{</span><span class="nx">y</span><span class="o">:</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span><span class="p">}})</span>
<span class="p">);</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">o</span><span class="p">).</span><span class="nx">t</span> <span class="o">=</span> <span class="s2">"hello"</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">hello</span> <span class="c1">// undefined</span></code></pre></div>

<span id="toc27"></span><div class="chapter"><h2 id="参考链接" class="reference">参考链接</h2></div>

<ul class="reference-list">
<li>Axel Rauschmayer, <a href="http://www.2ality.com/2013/08/protecting-objects.html">Protecting objects in JavaScript</a></li>
<li>kangax, <a href="http://perfectionkills.com/understanding-delete/">Understanding delete</a></li>
<li>Jon Bretman, <a href="http://techblog.badoo.com/blog/2013/11/01/type-checking-in-javascript/">Type Checking in JavaScript</a></li>
<li>Cody Lindley, <a href="http://tech.pro/tutorial/1671/thinking-about-ecmascript-5-parts">Thinking About ECMAScript 5 Parts</a></li>
<li>Bjorn Tipling, <a href="http://bjorn.tipling.com/advanced-objects-in-javascript">Advanced objects in JavaScript</a></li>
<li>Javier Márquez, <a href="http://arqex.com/967/javascript-properties-enumerable-writable-configurable">Javascript properties are enumerable, writable and configurable</a></li>
<li>Sella Rafaeli, <a href="http://www.sellarafaeli.com/blog/native_javascript_data_binding">Native JavaScript Data-Binding</a>: 使用存取函数实现model与view的双向绑定</li>
</ul>


</div></div></article>

<div class="row">
    <div class="twelve columns">

<sectioni id="feature">

<h2>功能链接</h2>

<ul>

	<li><a href="https://github.com/ruanyf/jstutorial/issues">论坛</a></li>
	<li><a href="https://raw.github.com/ruanyf/jstutorial/gh-pages/stdlib/object.md">Markdown源码</a></li>
	<li><a href="https://github.com/ruanyf/jstutorial/commits/gh-pages/stdlib/object.md">修订历史</a></li>

</ul>

<h2>留言</h2>

<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./basic_files/saved_resource.htm" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 2171px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jstutorial'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>
    



</sectioni></div>
</div>

<footer>
<div class="row">
<div class="twelve columns">
	<p><a href="http://javascript.ruanyifeng.com/introduction/license.html">版权声明</a> | last modified on 2013-12-15 </p>
</div>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43771063-1', 'ruanyifeng.com');
  ga('send', 'pageview');
</script>




</body></html>